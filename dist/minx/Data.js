!function(s){var n=s.Class({events:["before","array","object","convert","data","error","after"],properties:{zncaller:null,argv:null,context:null,data:null},methods:{init:function(t,r,e){var n=t||{},i=n.auto;null==i&&(i=!0),this._argv=n,this._context=e,this.__initEvents(r),s.is(n,"object")&&(this._zncaller=n.zncaller),i&&this.__init(n)},refresh:function(t,r,e){return this.overwriteCall(t||this._argv,r,e),this},recall:function(){return this.refresh(),this},call:function(t){return this.__init(t),this},overwriteCall:function(t,r,e){return t&&(this._argv=t,e&&(this._context=e),r&&this.__initEvents(r),this.__init(this._argv)),this},extendArgv:function(){return 1==arguments.length?s.extend(this._argv,arguments[0]):2==arguments.length&&this._argv[arguments[0]]&&s.extend(this._argv[arguments[0]],arguments[1]),this},overwriteArgv:function(){return 1==arguments.length?s.overwrite(this._argv,arguments[0]):2==arguments.length&&this._argv[arguments[0]]&&s.overwrite(this._argv[arguments[0]],arguments[1]),this},__initEvents:function(t){if(t)for(var r in t)this.on(r,t[r],this);return this},__init:function(t){var r=Object.prototype.toString.call(t);this.fire("before",t),"[object Array]"==r?this.__array(t):"[object Object]"==r?this.__object(t):this.fire("error",t)},__array:function(t){this.fire("array",t),this.fire("after",this.__dataConvert(t))},__object:function(t){this.fire("object",t);var r=this._zncaller||s.data.zncaller;if(!r)throw new Error("ZNData zncaller is null.");if(!t.url)throw new Error("ZNData data.url is exist.");t.url=s.data.resolveURL(t.url),r(t).then(function(t,r){this.fire("after",this.__dataConvert(t),r)}.bind(this),function(t){this.fire("error",t)}.bind(this))},__dataConvert:function(t){var r=this.fire("convert",t);if(null!=r)return r;var e=t.result||t;return this._data=this.fire("data",e)||e,this._data}}});s.data=s.Class({static:!0,properties:{zncaller:null,host:null,port:null},methods:{init:function(){this.zncaller=null,this.host=window.location.origin,this.port=null},create:function(t,r,e){return new n(t,r,e)},setting:function(t){return this.sets(t),this},setHost:function(t,r){return this.host=t,this.port=r,this},setCaller:function(t){return this.zncaller=t,this},getBaseURL:function(t,r){var e=t||this.host,n=r||this.port;return n?e.split(":")[0]+n:e},resolveURL:function(t,r,e){var n=t||"";return-1==n.indexOf("http://")&&-1==n.indexOf("https://")&&(n=this.getBaseURL(r,e)+n),n},request:function(t){if(!t||!t.url)throw new ReferenceError("zn.data.request() argv or argv.url is null.");if(!this.zncaller)throw new ReferenceError("zn.data.zncaller is null.");if("function"!=typeof this.zncaller)throw new ReferenceError('zn.data.zncaller is not "function" type.');return t.url=this.resolveURL(t.url),this.zncaller(t)},get:function(t,r){return this.request(s.deepAssigns({url:t,method:"get"},r))},post:function(t,r){return this.request(s.deepAssigns({url:t,method:"post"},r))},delete:function(t,r){return this.request(s.deepAssigns({url:t,method:"delete"},r))},put:function(t,r){return this.request(s.deepAssigns({url:t,method:"put"},r))}}})}(zn);