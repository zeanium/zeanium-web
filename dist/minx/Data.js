!function(r){var i=r.Class({events:["before","convert","data","error","after"],properties:{argv:null,data:null},methods:{init:function(t,r){this._argv=t,this.__init(t)},refresh:function(){this.__init(this._argv)},__init:function(t){var r=Object.prototype.toString.call(t);this.fire("before",t),"[object Array]"==r?this.__array(t):"[object Object]"==r?this.__object(t):this.fire("error",t)},__array:function(t){this.fire("array",t),this.fire("after",this.__dataConvert(t))},__object:function(t){if(this.fire("object",t),!r.data.caller)throw new Error("zn.data.caller is null");r.data.caller.call(t,r.data.caller).then(function(t){this.fire("after",this.__dataConvert(t))}.bind(this),function(t){this.fire("error",t)}.bind(this))},__dataConvert:function(t){var r=this.fire("convert",t);if(null!=r)return r;var i=t.result||t;return this._data=this.fire("data",i)||i,this._data}}});r.data=r.Class({static:!0,properties:{caller:null},methods:{create:function(t){return new i(t)},settings:function(t){return this.sets(t),this}}})}(zn);